{"version":3,"sources":["assets\\script\\enemy.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport App from \"./app\";\r\n\r\n@ccclass\r\nexport default class Enemy extends cc.Component {\r\n    //奖励分数\r\n    @property\r\n    rewardScore: number = 1;\r\n\r\n    //飞行速度，用时间来表示\r\n    @property\r\n    speed: number = 1;\r\n\r\n    //生命值\r\n    @property\r\n    hp: number = 100;\r\n\r\n     //爆炸音效\r\n     @property(cc.AudioClip)\r\n     audio_blowup: cc.AudioClip = null;\r\n\r\n    //行程\r\n    private _s=0;\r\n    private _hp=0;\r\n\r\n    //default sprite\r\n    private _spriteFrame:cc.SpriteFrame;\r\n\r\n    // LIFE-CYCLE CALLBACKS\r\n    onLoad () {\r\n    }\r\n\r\n    // start() { }\r\n    // update (dt) {}\r\n    //飞行动作\r\n    fly() {\r\n        this._s=-this.node.parent.height;\r\n        this._hp=this.hp;\r\n        // this.node.setPosition(cc.v2(this.mrandX,600));\r\n        this.node.runAction(cc.sequence(cc.moveBy(this.speed, cc.v2(0, this._s)).easing(cc.easeIn(1.0)), cc.callFunc( () =>{\r\n            //回收到对象池\r\n            App.Instance.PutNode2Pool(this.node.name, this.node);\r\n        }, this)));\r\n    }\r\n\r\n    //碰撞检测\r\n    onCollisionEnter(other, self) {\r\n        cc.log(self.name, \"<发生碰撞>\", other.name);\r\n        if (this._hp > 0) {\r\n            this._hp -= 50;\r\n            cc.log(\"enemy hp=\",this.hp);\r\n            return;\r\n        } \r\n        this._spriteFrame=this.node.getComponent(cc.Sprite).spriteFrame;\r\n        this.node.stopAllActions();\r\n        this.node.group = 'default'; //不让动画在执行碰撞\r\n        let anim = this.node.getComponent(cc.Animation);\r\n        anim.play();\r\n        anim.on('finished', this.onResume, this);\r\n        cc.audioEngine.play(this.audio_blowup,false,1);\r\n        //播放音效\r\n        // cc.audioEngine.playEffect(this.enemyDownClip, false);  \r\n    }\r\n\r\n    //重置节点 回收到对象池\r\n    onResume(e) {\r\n        cc.log(\"动画结束后 动画节点回收\");\r\n        \r\n        this.node.getComponent(cc.Sprite).spriteFrame=this._spriteFrame;\r\n        this._hp=this.hp;\r\n\r\n        let event=new cc.Event.EventCustom('enemy_destory', true);\r\n        event.setUserData(this.rewardScore);\r\n    \r\n        //敌机消灭，通知奖励\r\n       this.node.dispatchEvent(event);\r\n        \r\n        App.Instance.PutNode2Pool(this.node.name, this.node);\r\n    }\r\n}\r\n"]}