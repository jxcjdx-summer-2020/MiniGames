{"version":3,"sources":["assets\\Scripts\\player.js"],"names":["cc","Class","Component","properties","speed","bulletrDuration","timer","onKeyDown","event","keyCode","macro","KEY","a","accLeft","d","accRight","w","accFlow","s","accDown","onKeyUp","onLoad","parent","node","getParent","game","getComponent","director","getCollisionManager","enabled","enabledDebugDraw","systemEvent","on","SystemEvent","EventType","KEY_DOWN","KEY_UP","onDestroy","off","start","update","dt","x","y","spawnNewBullet","height","onCollisionEnter","other","self","group","destroy","gameOver"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speed:0,\r\n        bulletrDuration:0,\r\n        timer:0,\r\n    },\r\n    onKeyDown (event) {\r\n        // set a flag when key pressed\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.accFlow = true;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.accDown = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyUp (event) {\r\n        // unset a flag when key released\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.accFlow=false;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.accDown=false;\r\n                break;\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n        this.parent=this.node.getParent();\r\n        this.game=this.parent.getComponent('game');\r\n\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n        this.accDown=false;\r\n        this.accFlow=false;\r\n\r\n        \r\n        cc.director.getCollisionManager().enabled=true;\r\n        cc.director.getCollisionManager().enabledDebugDraw = false;\r\n\r\n        // infiniate keyboard listerner\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);   \r\n    },\r\n\r\n    onDestroy () {\r\n        // cancel keyboard listerner \r\n       \r\n\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n    start () {\r\n        \r\n    },\r\n  \r\n   update (dt) {\r\n        if(this.accLeft&&this.node.x>-270)\r\n            this.node.x -= this.speed;     \r\n        else if(this.accRight&&this.node.x<270)\r\n            this.node.x+=this.speed;\r\n        else if(this.accFlow&&this.node.y<425)\r\n            this.node.y+=this.speed;\r\n        else if(this.accDown&&this.node.y>-425)\r\n            this.node.y-=this.speed;\r\n        else\r\n           ;\r\n\r\n        if (this.timer > this.bulletrDuration) {\r\n            this.game.spawnNewBullet(this.node.x,this.node.y+this.node.height/2+13);\r\n            this.timer=0;\r\n            return;\r\n        }\r\n        this.timer += dt;      \r\n    },\r\n\r\n    onCollisionEnter:function(other,self){              \r\n        if(other.node.group == 'enemy' || other.node.group == 'enemybuff') \r\n        {   \r\n            this.node.destroy(); \r\n            other.node.destroy();\r\n            this.game.gameOver();\r\n        }\r\n    },\r\n   \r\n});\r\n"]}