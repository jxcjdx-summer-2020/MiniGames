{"version":3,"sources":["assets\\Scripts\\game.js"],"names":["cc","Class","Component","properties","bullet_1Prefab","type","Prefab","player","Node","enemyPrefab","enemyBulletPrefab","score","Label","scoreAudio","AudioClip","bullet_2Prefab","boomPrefab","enemyBuffPrefab","buff","onLoad","tran","Score","bulletrDuration","timer","getComponent","game","start","update","dt","spawnNewEnemy","spawnNewBullet","X","Y","newBullet","instantiate","node","addChild","setPosition","v2","Math","random","newEnemy","getNewEnemyPosition","randX","maxX","width","spawnEnemyBullet","newEnemyBullet","addScore","audioEngine","playEffect","string","addBoom","newBoom","addBuff","newBuff","tran_Bullet","gameOver","director","loadScene"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bullet_1Prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        enemyPrefab:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        enemyBulletPrefab:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        score:{\r\n            default:null,\r\n            type:cc.Label\r\n        },\r\n        scoreAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        bullet_2Prefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        boomPrefab:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        enemyBuffPrefab:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        buff:{\r\n            default: null,\r\n            type: cc.Prefab\r\n        }\r\n    },\r\n    onLoad() {\r\n        this.tran=0;\r\n        this.Score=0;\r\n        this.bulletrDuration=2;\r\n        this.timer=0;\r\n        this.player.getComponent('player').game = this;\r\n        \r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        //enemy plane\r\n        if (this.timer > this.bulletrDuration) {\r\n            this.spawnNewEnemy();\r\n            this.timer=0;\r\n            return;\r\n        }\r\n        this.timer += dt; \r\n    },\r\n\r\n    //bullet\r\n    spawnNewBullet: function(X,Y) {\r\n        switch(this.tran) {\r\n            case 0:\r\n                var newBullet = cc.instantiate(this.bullet_1Prefab);\r\n                this.node.addChild(newBullet);\r\n                newBullet.setPosition(cc.v2(X,Y));\r\n                break;\r\n            case 1:\r\n                var newBullet = cc.instantiate(this.bullet_2Prefab);\r\n                this.node.addChild(newBullet);\r\n                newBullet.setPosition(cc.v2(X,Y));\r\n                break;\r\n        }\r\n    },\r\n\r\n    //enemy plane random location\r\n    spawnNewEnemy: function() {\r\n        if(Math.random()<0.3)\r\n        {\r\n            var newEnemy = cc.instantiate(this.enemyBuffPrefab);\r\n            this.node.addChild(newEnemy);\r\n            newEnemy.setPosition(this.getNewEnemyPosition());\r\n        }\r\n        else{\r\n            var newEnemy = cc.instantiate(this.enemyPrefab);\r\n            this.node.addChild(newEnemy);\r\n            newEnemy.setPosition(this.getNewEnemyPosition());\r\n        }   \r\n    },\r\n    getNewEnemyPosition: function () {\r\n        var randX = 0;\r\n        //  get the x coordiate through screen width\r\n        var maxX = this.node.width/2;\r\n        randX = (Math.random() - 0.5) * 2 * maxX;\r\n        return cc.v2(randX, 480);\r\n    },\r\n\r\n    //enemy plane's bullet\r\n    spawnEnemyBullet: function(X,Y) {\r\n        var newEnemyBullet = cc.instantiate(this.enemyBulletPrefab);\r\n        this.node.addChild(newEnemyBullet);\r\n        newEnemyBullet.setPosition(cc.v2(X,Y));\r\n    },\r\n\r\n    //score\r\n    addScore:function(){\r\n        cc.audioEngine.playEffect(this.scoreAudio, false);\r\n        this.Score++;\r\n        this.score.string=\"Scoer: \"+this.Score;\r\n    },\r\n    //boom\r\n    addBoom:function(X,Y){\r\n        var newBoom = cc.instantiate(this.boomPrefab);\r\n        this.node.addChild(newBoom);\r\n        newBoom.setPosition(cc.v2(X,Y));\r\n    },\r\n    //buff\r\n    addBuff:function(X,Y){\r\n        var newBuff = cc.instantiate(this.buff);\r\n        this.node.addChild(newBuff);\r\n        newBuff.setPosition(cc.v2(X,Y));\r\n    },\r\n    tran_Bullet:function(X){\r\n        this.tran=X;\r\n    },\r\n    gameOver(){\r\n        cc.director.loadScene('end')\r\n    }\r\n\r\n});\r\n"]}