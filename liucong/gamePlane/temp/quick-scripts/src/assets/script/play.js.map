{"version":3,"sources":["assets\\script\\play.js"],"names":["cc","Class","Component","properties","enemy_path","bullet_prefab","type","Prefab","player_prefab","onLoad","anim","node","getChildByName","on","Node","EventType","TOUCH_MOVE","t","offset","getDelta","x","y","bind","shoot_flag","root","find","palyAgain","start","onCollisionEnter","other","self","getComponent","Animation","play","scheduleOnce","removeFromParent","active","play_shoot_bullet","schedule","_shoot_bullet","bullet","instantiate","parent","addChild","play_shoot_more_bullet","_shoot_more_bullet","i","speed_x"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        enemy_path: \"Canvas/enemy\",\r\n\r\n        bullet_prefab: {\r\n            type: cc.Prefab,\r\n            default: null,\r\n        },\r\n\r\n        player_prefab: {\r\n            type: cc.Prefab,\r\n            default: null,\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n        this.anim = this.node.getChildByName(\"anim\");\r\n        \r\n        //获得触摸移动事件\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(t) {\r\n            var offset = t.getDelta();\r\n            this.node.x += offset.x;\r\n            this.node.y += offset.y;\r\n            if (this.node.x >= 320) {\r\n                this.node.x = 320;\r\n            }\r\n            if (this.node.x <= -320) {\r\n                this.node.x = -320;\r\n            }\r\n            if (this.node.y <= -440) {\r\n                this.node.y = -440;\r\n            }\r\n        }.bind(this), this.node);\r\n\r\n        this.shoot_flag = 3; \r\n\r\n        this.root = cc.find(\"Canvas\");\r\n        this.palyAgain = cc.find(\"Canvas/playagain\");\r\n        \r\n    },\r\n\r\n    start: function() {\r\n        \r\n    },\r\n    // 碰撞事件\r\n    onCollisionEnter: function(other, self) {\r\n        //console.log(\"_______________碰撞成功\");\r\n        this.anim.getComponent(cc.Animation).play();\r\n        this.scheduleOnce(function() {\r\n            this.node.removeFromParent();\r\n            this.palyAgain.active = true;\r\n        }, 1);\r\n    \r\n    },\r\n\r\n    play_shoot_bullet: function() {\r\n        this.schedule(this._shoot_bullet.bind(this), 0.3);\r\n    },\r\n\r\n    // 发射一般子弹\r\n    _shoot_bullet: function() {\r\n        if (this.shoot_flag != 2) {\r\n            return ;\r\n        }\r\n        var bullet = cc.instantiate(this.bullet_prefab);\r\n        this.node.parent.addChild(bullet);\r\n\r\n        bullet.x = this.node.x;\r\n        bullet.y = this.node.y;\r\n    },\r\n\r\n    play_shoot_more_bullet: function() {\r\n        this.schedule(this._shoot_more_bullet.bind(this), 0.3);\r\n    },\r\n    // 发射多枚子弹\r\n    _shoot_more_bullet: function() {\r\n        \r\n        if (this.shoot_flag != 3) {\r\n            return ;\r\n        }\r\n\r\n        var bullet = [];\r\n\r\n        for (var i=0; i<3; i++){\r\n            bullet[i] = cc.instantiate(this.bullet_prefab);\r\n            this.node.parent.addChild(bullet[i]);\r\n        }\r\n\r\n        bullet[0].x = this.node.x;\r\n        bullet[0].y = this.node.y;\r\n\r\n        bullet[1].x = this.node.x - 25;\r\n        bullet[1].y = this.node.y;\r\n        bullet[1].getComponent(\"bullet\").speed_x = -50;\r\n\r\n        bullet[2].x = this.node.x + 25;\r\n        bullet[2].y = this.node.y;\r\n        bullet[2].getComponent(\"bullet\").speed_x = 50;\r\n\r\n    },\r\n});\r\n"]}