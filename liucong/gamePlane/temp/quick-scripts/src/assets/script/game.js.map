{"version":3,"sources":["assets\\script\\game.js"],"names":["enemy_com","require","cc","Class","Component","properties","is_enbale","is_debug","groups_prefab","type","Prefab","enemy_component","score_path","onLoad","manager","director","getCollisionManager","enabled","enabledDebugDraw","kill_num","score","find","getComponent","Label","player","playagain","node","getChildByName","zIndex","start","_gen_random_group","play_shoot_more_bullet","add_score","string","g_type","Math","random","length","floor","g","instantiate","addChild","x","y","scheduleOnce","bind","play_again","loadScene"],"mappings":";;;;;;AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,OAAD,CAAvB;;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAE,IADH;AAERC,IAAAA,QAAQ,EAAE,IAFF;AAIRC,IAAAA,aAAa,EAAE;AACX,iBAAS,EADE;AAEXC,MAAAA,IAAI,EAAEP,EAAE,CAACQ;AAFE,KAJP;AASRC,IAAAA,eAAe,EAAE;AACb,iBAAS,IADI;AAEbF,MAAAA,IAAI,EAAET;AAFO,KATT;AAcRY,IAAAA,UAAU,EAAE;AAdJ,GAHP;AAoBL;AACAC,EAAAA,MAAM,EAAE,kBAAY;AAChB,QAAI,KAAKP,SAAT,EAAoB;AAChB,UAAIQ,OAAO,GAAGZ,EAAE,CAACa,QAAH,CAAYC,mBAAZ,EAAd;AACAF,MAAAA,OAAO,CAACG,OAAR,GAAkB,IAAlB,CAFgB,CAEQ;;AACxB,UAAI,KAAKV,QAAT,EAAmB;AACfO,QAAAA,OAAO,CAACI,gBAAR,GAA2B,IAA3B,CADe,CACkB;AACpC;AACJ;;AACD,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKC,KAAL,GAAalB,EAAE,CAACmB,IAAH,CAAQ,KAAKT,UAAb,EAAyBU,YAAzB,CAAsCpB,EAAE,CAACqB,KAAzC,CAAb;AACA,SAAKC,MAAL,GAActB,EAAE,CAACmB,IAAH,CAAQ,eAAR,EAAyBC,YAAzB,CAAsC,MAAtC,CAAd;AACA,SAAKG,SAAL,GAAiB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,WAAzB,CAAjB;AACA,SAAKF,SAAL,CAAeG,MAAf,GAAwB,GAAxB;AACH,GAlCI;AAoCLC,EAAAA,KAAK,EAAE,iBAAW;AACd;AACA,SAAKC,iBAAL,GAFc,CAGd;;;AACA,SAAKN,MAAL,CAAYO,sBAAZ;AACH,GAzCI;AA2CL;AACAC,EAAAA,SAAS,EAAE,qBAAW;AAClB,SAAKb,QAAL;AACA,SAAKC,KAAL,CAAWa,MAAX,GAAoB,KAAK,KAAKd,QAA9B;AAEH,GAhDI;AAkDL;AACAW,EAAAA,iBAAiB,EAAE,6BAAW;AAC1B,QAAII,MAAM,GAAGC,IAAI,CAACC,MAAL,KAAgB,KAAK5B,aAAL,CAAmB6B,MAAnC,GAA4C,CAAzD;AACAH,IAAAA,MAAM,GAAGC,IAAI,CAACG,KAAL,CAAWJ,MAAX,CAAT;;AACA,QAAIA,MAAM,IAAI,KAAK1B,aAAL,CAAmB6B,MAAjC,EAAyC;AACrCH,MAAAA,MAAM,GAAG,KAAK1B,aAAL,CAAmB6B,MAA5B;AACH;;AACD,QAAIE,CAAC,GAAGrC,EAAE,CAACsC,WAAH,CAAe,KAAKhC,aAAL,CAAmB0B,MAAM,GAAG,CAA5B,CAAf,CAAR;AACA,SAAKR,IAAL,CAAUe,QAAV,CAAmBF,CAAnB;AACAA,IAAAA,CAAC,CAACG,CAAF,GAAM,CAACP,IAAI,CAACC,MAAL,KAAgB,GAAjB,IAAwB,GAA9B;AACAG,IAAAA,CAAC,CAACI,CAAF,GAAOR,IAAI,CAACC,MAAL,EAAD,GAAkB,GAAlB,GAAwB,GAA9B;AACA,SAAKQ,YAAL,CAAkB,KAAKd,iBAAL,CAAuBe,IAAvB,CAA4B,IAA5B,CAAlB,EAAqDV,IAAI,CAACC,MAAL,KAAgB,CAAhB,GAAoB,CAAzE;AACH,GA9DI;AA+DL;AACAU,EAAAA,UAAU,EAAE,sBAAW;AACnB5C,IAAAA,EAAE,CAACa,QAAH,CAAYgC,SAAZ,CAAsB,MAAtB;AACH;AAlEI,CAAT","sourceRoot":"/","sourcesContent":["var enemy_com = require(\"enemy\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        is_enbale: true,\r\n        is_debug: true,\r\n\r\n        groups_prefab: {\r\n            default: [],\r\n            type: cc.Prefab,\r\n        },\r\n\r\n        enemy_component: {\r\n            default: null,\r\n            type: enemy_com,\r\n        },\r\n\r\n        score_path: \"Canvas/killnum/label/num\",\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if (this.is_enbale) {\r\n            var manager = cc.director.getCollisionManager();\r\n            manager.enabled = true; // 开启碰撞\r\n            if (this.is_debug) {\r\n                manager.enabledDebugDraw = true; // 调试状态绘制出我们物体的碰撞器的形状\r\n            }\r\n        }\r\n        this.kill_num = 0;\r\n        this.score = cc.find(this.score_path).getComponent(cc.Label);\r\n        this.player = cc.find(\"Canvas/player\").getComponent(\"play\");\r\n        this.playagain = this.node.getChildByName(\"playagain\");\r\n        this.playagain.zIndex = 100;\r\n    },\r\n\r\n    start: function() {\r\n        // 随机产生一组敌人\r\n        this._gen_random_group();\r\n        // 玩家发射子弹\r\n        this.player.play_shoot_more_bullet();\r\n    },\r\n\r\n    // 击杀一个玩家得一分\r\n    add_score: function() {\r\n        this.kill_num ++;\r\n        this.score.string = \"\" + this.kill_num;\r\n        \r\n    },\r\n\r\n    // 随机&无限的产生一组敌人\r\n    _gen_random_group: function() {\r\n        var g_type = Math.random() * this.groups_prefab.length + 1;\r\n        g_type = Math.floor(g_type);\r\n        if (g_type >= this.groups_prefab.length) {\r\n            g_type = this.groups_prefab.length;\r\n        }\r\n        var g = cc.instantiate(this.groups_prefab[g_type - 1]);\r\n        this.node.addChild(g);\r\n        g.x = (Math.random() - 0.5) * 320;\r\n        g.y = (Math.random()) * 100 + 550;\r\n        this.scheduleOnce(this._gen_random_group.bind(this), Math.random() * 1 + 2);\r\n    },\r\n    // 点击重玩按钮\r\n    play_again: function() {\r\n        cc.director.loadScene(\"game\");\r\n    },\r\n});\r\n"]}